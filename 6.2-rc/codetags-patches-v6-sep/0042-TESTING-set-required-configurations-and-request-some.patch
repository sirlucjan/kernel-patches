From ffb8e443638e7c198bd0f3ac21dfb4c234fc512a Mon Sep 17 00:00:00 2001
From: Suren Baghdasaryan <surenb@google.com>
Date: Sun, 31 Jul 2022 13:19:09 -0700
Subject: [PATCH 42/45] TESTING: set required configurations and request some
 context captures

Signed-off-by: Suren Baghdasaryan <surenb@google.com>
---
 drivers/staging/ctagmod/Kconfig | 1 +
 lib/Kconfig.debug               | 9 +++++++++
 2 files changed, 10 insertions(+)

diff --git a/drivers/staging/ctagmod/Kconfig b/drivers/staging/ctagmod/Kconfig
index f267ffc6a..e66394482 100644
--- a/drivers/staging/ctagmod/Kconfig
+++ b/drivers/staging/ctagmod/Kconfig
@@ -2,6 +2,7 @@
 config CTAGMOD
 	tristate "Code tagging test module"
 	depends on CODE_TAGGING
+	default m
 	help
 	  Code tagging test module.
 
diff --git a/lib/Kconfig.debug b/lib/Kconfig.debug
index 7fd4b94a0..7149f0253 100644
--- a/lib/Kconfig.debug
+++ b/lib/Kconfig.debug
@@ -1035,6 +1035,15 @@ config ALLOC_TAGGING_DEBUG
 	  Adds warnings with helpful error messages for memory allocation
 	  profiling.
 
+config CODE_TAG_TESTING
+	bool "Enable code tag testing"
+	default y
+	select ALLOC_TAGGING
+	select ALLOC_TAGGING_DEBUG
+	select STAGING
+	help
+	  Enable to test code tagging.
+
 source "lib/Kconfig.kasan"
 source "lib/Kconfig.kfence"
 source "lib/Kconfig.kmsan"
-- 
2.39.0.rc2.1.gbd5df96b79

