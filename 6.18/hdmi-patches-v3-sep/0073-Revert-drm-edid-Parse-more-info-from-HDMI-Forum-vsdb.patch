From 57f0c908fcc7b0884405c67f418b8fd97500df1e Mon Sep 17 00:00:00 2001
From: Peter Jung <admin@ptr1337.dev>
Date: Sat, 31 Jan 2026 13:14:34 +0100
Subject: [PATCH 073/100] Revert "drm/edid: Parse more info from HDMI Forum
 vsdb"

This reverts commit 9968cdca499190f8f054663c5e6898a6eb4a1229.
---
 drivers/gpu/drm/drm_edid.c  | 41 +-------------------------------
 include/drm/drm_connector.h | 47 -------------------------------------
 2 files changed, 1 insertion(+), 87 deletions(-)

diff --git a/drivers/gpu/drm/drm_edid.c b/drivers/gpu/drm/drm_edid.c
index 5bdacd425..e2e85345a 100644
--- a/drivers/gpu/drm/drm_edid.c
+++ b/drivers/gpu/drm/drm_edid.c
@@ -6149,33 +6149,6 @@ static void drm_parse_ycbcr420_deep_color_info(struct drm_connector *connector,
 	hdmi->y420_dc_modes = dc_mask;
 }
 
-static void drm_parse_hdmi_gaming_info(struct drm_hdmi_info *hdmi, const u8 *db)
-{
-	struct drm_hdmi_vrr_cap *vrr = &hdmi->vrr_cap;
-
-	if (cea_db_payload_len(db) < 8)
-		return;
-
-	hdmi->fapa_start_location = db[8] & DRM_EDID_FAPA_START_LOCATION;
-	hdmi->allm = db[8] & DRM_EDID_ALLM;
-	vrr->fva = db[8] & DRM_EDID_FVA;
-	vrr->cnmvrr = db[8] & DRM_EDID_CNMVRR;
-	vrr->cinema_vrr = db[8] & DRM_EDID_CINEMA_VRR;
-	vrr->mdelta = db[8] & DRM_EDID_MDELTA;
-
-	if (cea_db_payload_len(db) < 9)
-		return;
-
-	vrr->vrr_min = db[9] & DRM_EDID_VRR_MIN_MASK;
-	vrr->supported = (vrr->vrr_min > 0 && vrr->vrr_min <= 48);
-
-	if (cea_db_payload_len(db) < 10)
-		return;
-
-	vrr->vrr_max = (db[9] & DRM_EDID_VRR_MAX_UPPER_MASK) << 2 | db[10];
-	vrr->supported &= (vrr->vrr_max == 0 || vrr->vrr_max >= 100);
-}
-
 static void drm_parse_dsc_info(struct drm_hdmi_dsc_cap *hdmi_dsc,
 			       const u8 *hf_scds)
 {
@@ -6301,7 +6274,7 @@ static void drm_parse_hdmi_forum_scds(struct drm_connector *connector,
 	}
 
 	drm_parse_ycbcr420_deep_color_info(connector, hf_scds);
-	drm_parse_hdmi_gaming_info(&connector->display_info.hdmi, hf_scds);
+
 	if (cea_db_payload_len(hf_scds) >= 11 && hf_scds[11]) {
 		drm_parse_dsc_info(hdmi_dsc, hf_scds);
 		dsc_support = true;
@@ -6311,18 +6284,6 @@ static void drm_parse_hdmi_forum_scds(struct drm_connector *connector,
 		    "[CONNECTOR:%d:%s] HF-VSDB: max TMDS clock: %d KHz, HDMI 2.1 support: %s, DSC 1.2 support: %s\n",
 		    connector->base.id, connector->name,
 		    max_tmds_clock, str_yes_no(max_frl_rate), str_yes_no(dsc_support));
-	drm_dbg_kms(connector->dev,
-		    "[CONNECTOR:%d:%s] FAPA in blanking: %s, ALLM support: %s, Fast Vactive support: %s\n",
-		    connector->base.id, connector->name, str_yes_no(hdmi->fapa_start_location),
-		    str_yes_no(hdmi->allm), str_yes_no(hdmi->vrr_cap.fva));
-	drm_dbg_kms(connector->dev,
-		    "[CONNECTOR:%d:%s] Negative M VRR support: %s, CinemaVRR support: %s, Mdelta: %d\n",
-		    connector->base.id, connector->name, str_yes_no(hdmi->vrr_cap.cnmvrr),
-		    str_yes_no(hdmi->vrr_cap.cinema_vrr), hdmi->vrr_cap.mdelta);
-	drm_dbg_kms(connector->dev,
-		    "[CONNECTOR:%d:%s] VRRmin: %u, VRRmax: %u, VRR supported: %s\n",
-		    connector->base.id, connector->name, hdmi->vrr_cap.vrr_min,
-		    hdmi->vrr_cap.vrr_max, str_yes_no(hdmi->vrr_cap.supported));
 }
 
 static void drm_parse_hdmi_deep_color_info(struct drm_connector *connector,
diff --git a/include/drm/drm_connector.h b/include/drm/drm_connector.h
index dab9d5521..8f34f4b81 100644
--- a/include/drm/drm_connector.h
+++ b/include/drm/drm_connector.h
@@ -254,44 +254,6 @@ struct drm_scdc {
 	struct drm_scrambling scrambling;
 };
 
-/**
- * struct drm_hdmi_vrr_cap - Information about VRR capabilities of a HDMI sink
- *
- * Describes the VRR support provided by HDMI 2.1 sink. The information is
- * fetched fom additional HFVSDB blocks defined for HDMI 2.1.
- */
-struct drm_hdmi_vrr_cap {
-	/** @fva: flag for Fast VActive (Quick Frame Transport) support */
-	bool fva;
-
-	/** @mcnmvrr: flag for Negative M VRR support */
-	bool cnmvrr;
-
-	/** @mcinema_vrr: flag for Cinema VRR support */
-	bool cinema_vrr;
-
-	/** @mdelta: flag for limited frame-to-frame compensation support */
-	bool mdelta;
-
-	/**
-	 * @vrr_min : minimum supported variable refresh rate in Hz.
-	 * Valid values only inide 1 - 48 range
-	 */
-	u16 vrr_min;
-
-	/**
-	 * @vrr_max : maximum supported variable refresh rate in Hz (optional).
-	 * Valid values are either 0 (max based on video mode) or >= 100
-	 */
-	u16 vrr_max;
-
-	/**
-	 * @supported: flag for vrr support based on checking for VRRmin and
-	 * VRRmax values having correct values.
-	 */
-	bool supported;
-};
-
 /**
  * struct drm_hdmi_dsc_cap - DSC capabilities of HDMI sink
  *
@@ -368,15 +330,6 @@ struct drm_hdmi_info {
 	/** @max_lanes: supported by sink */
 	u8 max_lanes;
 
-	/** @fapa_start_location: flag for the FAPA in blanking support */
-	bool fapa_start_location;
-
-	/** @allm: flag for Auto Low Latency Mode support by sink */
-	bool allm;
-
-	/** @vrr_cap: VRR capabilities of the sink */
-	struct drm_hdmi_vrr_cap vrr_cap;
-
 	/** @dsc_cap: DSC capabilities of the sink */
 	struct drm_hdmi_dsc_cap dsc_cap;
 };
-- 
2.52.0

